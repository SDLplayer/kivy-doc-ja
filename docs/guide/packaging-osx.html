<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="twitter:site" content="@kivyframework">
    
    <title>Creating packages for OS X &mdash; Kivy 1.9.1 ドキュメント</title>
    <link href='//fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../static/fresh.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.9.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../static/jquery-effects-core-and-slide.js"></script>
    <script type="text/javascript" src="../static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../static/kivy.js"></script>
    <link rel="top" title="Kivy 1.9.1 ドキュメント" href="../index.html" />
    <link rel="up" title="Packaging your application" href="packaging.html" />
    <link rel="next" title="Create a package for IOS" href="packaging-ios.html" />
    <link rel="prev" title="Kivy on Android" href="android.html" /> 
  </head>
  <body>

    <div id="topbar">
        <div id="topwrapper">
        <div id="toplogo">
            <a href="http://kivy.org/">
                <img src="../static/logo-kivy.png" alt="Kivy" height="50"/>
            </a>
        </div>
        <div id="topmenu">
            <ul class="navigation">
                <li><a class="nav-guides" href="../gettingstarted/intro.html">Guides</a></li>
                <li><a class="nav-garden" href="http://kivy-garden.github.io/">Garden</a></li>
                <li><a class="nav-api" href="../api-kivy.html">API Reference</a></li>
                <li><a class="nav-pdf" href="http://kivy.org/docs/pdf/Kivy-latest.pdf">PDF</a></li>
                <li><a class="nav-wiki" href="http://wiki.kivy.org">Wiki</a></li>
            </ul>
        </div>
        </div>
    </div>
<div id="contentall">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
                &nbsp;
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input type="text" class="text" name="q" />
            </form>
          <!--
          <h3><a href="../index.html">Creating packages for OS X</a></h3>
          <ul>
<li><a class="reference internal" href="#">Creating packages for OS X</a><ul>
<li><a class="reference internal" href="#using-buildozer">Using Buildozer</a></li>
<li><a class="reference internal" href="#using-the-kivy-sdk">Using the Kivy SDK</a><ul>
<li><a class="reference internal" href="#installing-modules">Installing modules</a></li>
<li><a class="reference internal" href="#where-are-the-modules-files-installed">Where are the modules/files installed?</a></li>
<li><a class="reference internal" href="#to-install-binary-files">To install binary files</a></li>
<li><a class="reference internal" href="#to-include-other-frameworks">To include other frameworks</a><ul>
<li><a class="reference internal" href="#shrinking-the-app-size">Shrinking the app size</a></li>
<li><a class="reference internal" href="#adjust-settings">Adjust settings</a></li>
<li><a class="reference internal" href="#create-a-dmg">Create a DMG</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#using-pyinstaller-without-homebrew">Using PyInstaller without Homebrew</a></li>
<li><a class="reference internal" href="#using-pyinstaller-and-homebrew">Using PyInstaller and Homebrew</a></li>
</ul>
</li>
</ul>

          <h3><a href="../index.html">Table Of Contents</a></h3>
          -->
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/index.html">Getting Started(翻訳中)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/intro.html">導入</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/installation.html">インストール</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/first_app.html">最初のアプリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/properties.html">プロパティ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/rules.html">Kv デザイン 言語</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/events.html">イベント</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/framework.html">Non-widget stuff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/layouts.html">Layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/drawing.html">Drawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/packaging.html">Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/diving.html">Diving in</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Gallery of Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/gallery.html">Gallery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__3Drendering__main__py.html">3D Rotating Monkey Head</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__animation__animate__py.html">Widget animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_suite__py.html">Suite of Application Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_build__py.html">Application example using build() + return</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv__py.html">Application built from a  .kv file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv_in_template1__py.html">Application from a .kv in a Template Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__camera__main__py.html">Camera Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__bezier__py.html">Bezier Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__canvas_stress__py.html">Canvas stress</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__circle__py.html">Circle Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__fbo_canvas__py.html">FBO Canvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines__py.html">Line (SmoothLine) Experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines_extended__py.html">Lines Extended Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__mesh__py.html">Mesh test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__multitexture__py.html">Multitexture Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__repeat_texture__py.html">Repeat Texture on Resize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__rotation__py.html">Rotation Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__stencil_canvas__py.html">Stencil demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__tesselate__py.html">Tesselate Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__texture__py.html">Texture Wrapping and Coordinates Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__camera_puzzle__py.html">Shuffled Camera Feed Puzzle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__kivycatalog__main__py.html">Kivyカタログ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__multistroke__main__py.html">Multistroke Recognition Database Demonstration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__pictures__main__py.html">Basic Picture Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__shadereditor__main__py.html">Live Shader Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__showcase__main__py.html">Showcase of Kivy Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__touchtracer__main__py.html">Touch Tracer Line Drawing Demonstration</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User’s Guide(翻訳中)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../philosophy.html">Philosophy(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contact.html">Contact Us</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../guide-index.html">Programming Guide(翻訳中)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic.html">Kivyの基本</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment.html">Controlling the environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Configure Kivy</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architectural Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events and Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html">Input management</a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html">Widgets(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html">Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="lang.html">Kv language(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="other-frameworks.html">Integrating with other Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="bestpractices.html">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="advancedgraphics.html">Advanced Graphics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="packaging.html">Packaging your application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/pong.html">Pong Game Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/firstwidget.html">A Simple Paint App</a></li>
</ul>
</li>
</ul>

          <!--
          <h3>Related Topics</h3>
          <ul>
              <li>Previous: <a href="android.html" title="previous chapter">Kivy on Android</a></li>
              <li>Next: <a href="packaging-ios.html" title="next chapter">Create a package for IOS</a></li>
          </ul>
          -->
        </div>
      </div>
    <div id="content">
    <div class="wrapper">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            <div class="toc"><h2>Table Of Contents</h2><ul>
<li><a class="reference internal" href="#">Creating packages for OS X</a><ul>
<li><a class="reference internal" href="#using-buildozer">Using Buildozer</a></li>
<li><a class="reference internal" href="#using-the-kivy-sdk">Using the Kivy SDK</a><ul>
<li><a class="reference internal" href="#installing-modules">Installing modules</a></li>
<li><a class="reference internal" href="#where-are-the-modules-files-installed">Where are the modules/files installed?</a></li>
<li><a class="reference internal" href="#to-install-binary-files">To install binary files</a></li>
<li><a class="reference internal" href="#to-include-other-frameworks">To include other frameworks</a><ul>
<li><a class="reference internal" href="#shrinking-the-app-size">Shrinking the app size</a></li>
<li><a class="reference internal" href="#adjust-settings">Adjust settings</a></li>
<li><a class="reference internal" href="#create-a-dmg">Create a DMG</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#using-pyinstaller-without-homebrew">Using PyInstaller without Homebrew</a></li>
<li><a class="reference internal" href="#using-pyinstaller-and-homebrew">Using PyInstaller and Homebrew</a></li>
</ul>
</li>
</ul>
</div>
            
  <div class="section" id="creating-packages-for-os-x">
<h1>Creating packages for OS X<a class="headerlink" href="#creating-packages-for-os-x" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Packaging Kivy applications with the following methods must be done inside
OS X, 32-bit platforms are no longer supported.</p>
</div>
<div class="section" id="using-buildozer">
<span id="osx-kivy-sdk-packager"></span><h2>Using Buildozer<a class="headerlink" href="#using-buildozer" title="このヘッドラインへのパーマリンク">¶</a></h2>
<blockquote>
<div>pip install git+http://github.com/kivy/buildozer
cd /to/where/I/Want/to/package
buildozer init</div></blockquote>
<p>Edit the buildozer.spec and add the details for your app.
Dependencies can be added to the <cite>requirements=</cite> section.</p>
<p>By default the kivy version specified in the requirements is ignored.</p>
<p>If you have a Kivy.app at /Applications/Kivy.app then that is used,
for packaging. Otherwise the latest build from kivy.org using Kivy
master will be downloaded and used.</p>
<p>If you want to package for python 3.x.x simply download the package
named Kivy3.7z from the download section of kivy.org and extract it
to Kivy.app in /Applications, then run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">buildozer</span> <span class="n">osx</span> <span class="n">debug</span>
</pre></div>
</div>
<p>Once the app is packaged, you might want to remove unneeded
packages like gstreamer, if you don&#8217;t need video support.
Same logic applies for other things you do not use, just reduce
the package to its minimal state that is needed for the app to run.</p>
<p>As an example we are including the showcase example packaged using
this method for both Python 2 (9.xMB) and 3 (15.xMB), you can find the
packages here:
<a class="reference external" href="https://drive.google.com/drive/folders/0B1WO07-OL50_alFzSXJUajBFdnc">https://drive.google.com/drive/folders/0B1WO07-OL50_alFzSXJUajBFdnc</a> .</p>
<p>That&#8217;s it. Enjoy!</p>
<p>Buildozer right now uses the Kivy SDK to package your app.
If you want to control more details about your app than buildozer
currently offers then you can use the SDK directly, as detailed in the
section below.</p>
</div>
<div class="section" id="using-the-kivy-sdk">
<h2>Using the Kivy SDK<a class="headerlink" href="#using-the-kivy-sdk" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Since version 1.9.0, Kivy is released for the OS X platform in a
self-contained, portable distribution.</p>
<p>Apps can be packaged and distributed with the Kivy SDK using the method
described below, making it easier to include frameworks like SDL2 and
GStreamer.</p>
<ol class="arabic">
<li><p class="first">Make sure you have the unmodified Kivy SDK (Kivy.app) from the download page.</p>
</li>
<li><p class="first">Run the following commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mkdir</span> <span class="n">packaging</span>
<span class="o">&gt;</span> <span class="n">cd</span> <span class="n">packaging</span>
<span class="n">packaging</span><span class="o">&gt;</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">kivy</span><span class="o">/</span><span class="n">kivy</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">packager</span>
<span class="n">packaging</span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">kivy</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">packager</span><span class="o">/</span><span class="n">osx</span>
<span class="n">osx</span><span class="o">&gt;</span> <span class="n">cp</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Kivy</span><span class="o">.</span><span class="n">app</span> <span class="o">./</span><span class="n">Kivy</span><span class="o">.</span><span class="n">App</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">This step above is important, you have to make sure to preserve the paths
and permissions. A command like <code class="docutils literal"><span class="pre">cp</span> <span class="pre">-rf</span></code> will copy but make the app
unusable and lead to error later on.</p>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p class="first">Now all you need to do is to include your compiled app in the Kivy.app
by running the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">osx</span><span class="o">&gt;</span> <span class="o">./</span><span class="n">package</span><span class="o">-</span><span class="n">app</span><span class="o">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/&lt;</span><span class="n">app_folder_name</span><span class="o">&gt;/</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p>Where &lt;app_folder_name&gt; is the name of your app.</p>
<p>This copies Kivy.app to <cite>&lt;app_folder_name&gt;.app</cite> and includes a compiled copy
of your app into this package.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>That&#8217;s it, your self-contained package is ready to be deployed!
You can now further customize your app as described bellow.</li>
</ol>
<div class="section" id="installing-modules">
<h3>Installing modules<a class="headerlink" href="#installing-modules" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Kivy package on osx uses its own virtual env that is activated when you run your app using <cite>kivy</cite> command.
To install any module you need to install the module like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ kivy -m pip install &lt;modulename&gt;
</pre></div>
</div>
</div>
<div class="section" id="where-are-the-modules-files-installed">
<h3>Where are the modules/files installed?<a class="headerlink" href="#where-are-the-modules-files-installed" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Inside the portable venv within the app at:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Kivy</span><span class="o">.</span><span class="n">app</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">Resources</span><span class="o">/</span><span class="n">venv</span><span class="o">/</span>
</pre></div>
</div>
<p>If you install a module that installs a binary for example like kivy-garden
That binary will be only available from the venv above, as in after you do:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">kivy</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">kivy</span><span class="o">-</span><span class="n">garden</span>
</pre></div>
</div>
<p>The garden lib will be only available when you activate this env.</p>
<blockquote>
<div>source /Applications/Kivy.app/Contents/Resources/venv/bin/activate
garden install mapview
deactivate</div></blockquote>
</div>
<div class="section" id="to-install-binary-files">
<h3>To install binary files<a class="headerlink" href="#to-install-binary-files" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Just copy the binary to the Kivy.app/Contents/Resources/venv/bin/ directory.</p>
</div>
<div class="section" id="to-include-other-frameworks">
<h3>To include other frameworks<a class="headerlink" href="#to-include-other-frameworks" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Kivy.app comes with SDL2 and Gstreamer frameworks provided.
To include frameworks other than the ones provided do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tito</span><span class="o">/</span><span class="n">osxrelocator</span>
<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=~/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">osxrelocator</span>
<span class="n">cd</span> <span class="n">Kivy</span><span class="o">.</span><span class="n">app</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">osxrelocator</span> <span class="o">-</span><span class="n">r</span> <span class="o">.</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/&lt;</span><span class="n">Framework_name</span><span class="o">&gt;.</span><span class="n">framework</span><span class="o">/</span> \
<span class="nd">@executable_path</span><span class="o">/../</span><span class="n">Frameworks</span><span class="o">/&lt;</span><span class="n">Framework_name</span><span class="o">&gt;.</span><span class="n">framework</span><span class="o">/</span>
</pre></div>
</div>
<p>Do not forget to replace &lt;Framework_name&gt; with your framework.
This tool <cite>osxrelocator</cite> essentially changes the path for the
libs in the framework such that they are relative to the executable
within the .app, making the Framework portable with the .app.</p>
<div class="section" id="shrinking-the-app-size">
<h4>Shrinking the app size<a class="headerlink" href="#shrinking-the-app-size" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>The app has a considerable size right now, however the unneeded parts can be
removed from the package.</p>
<p>For example if you don&#8217;t use GStreamer, simply remove it from
YourApp.app/Contents/Frameworks.
Similarly you can remove the examples folder from
/Applications/Kivy.app/Contents/Resources/kivy/examples/ or kivy/tools,
kivy/docs etc.</p>
<p>This way the package can be made to only include the parts that are needed for
your app.</p>
</div>
<div class="section" id="adjust-settings">
<h4>Adjust settings<a class="headerlink" href="#adjust-settings" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Icons and other settings of your app can be changed by editing
YourApp/Contents/info.plist to suit your needs.</p>
</div>
<div class="section" id="create-a-dmg">
<h4>Create a DMG<a class="headerlink" href="#create-a-dmg" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>To make a DMG of your app use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">osx</span><span class="o">&gt;</span> <span class="o">./</span><span class="n">create</span><span class="o">-</span><span class="n">osx</span><span class="o">-</span><span class="n">dmg</span><span class="o">.</span><span class="n">sh</span> <span class="n">YourApp</span><span class="o">.</span><span class="n">app</span>
</pre></div>
</div>
<p>Note the lack of <cite>/</cite> at the end.
This should give you a compressed dmg that will further shrink the size of your distributed app.</p>
</div>
</div>
</div>
<div class="section" id="using-pyinstaller-without-homebrew">
<span id="osx-pyinstaller"></span><h2>Using PyInstaller without Homebrew<a class="headerlink" href="#using-pyinstaller-without-homebrew" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>First install Kivy and its dependencies without using Homebrew as mentioned here
<a class="reference external" href="http://kivy.org/docs/installation/installation.html#development-version">http://kivy.org/docs/installation/installation.html#development-version</a>.</p>
<p>Once you have kivy and its deps installed, you need to install PyInstaller.</p>
<p>Let&#8217;s assume we use a folder like <cite>testpackaging</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">testpackaging</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pyinstaller</span><span class="o">/</span><span class="n">pyinstaller</span>
</pre></div>
</div>
<p>Create a file named touchtracer.spec in this directory and add the following
code to it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># -*- mode: python -*-</span>

<span class="n">block_cipher</span> <span class="o">=</span> <span class="kc">None</span>
<span class="kn">from</span> <span class="nn">kivy.tools.packaging.pyinstaller_hooks</span> <span class="k">import</span> <span class="n">get_deps_all</span><span class="p">,</span> <span class="n">hookspath</span><span class="p">,</span> <span class="n">runtime_hooks</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s1">&#39;/path/to/yout/folder/containing/examples/demo/touchtracer/main.py&#39;</span><span class="p">],</span>
             <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/path/to/yout/folder/containing/testpackaging&#39;</span><span class="p">],</span>
             <span class="n">binaries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">win_no_prefer_redirects</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">win_private_assemblies</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">cipher</span><span class="o">=</span><span class="n">block_cipher</span><span class="p">,</span>
             <span class="n">hookspath</span><span class="o">=</span><span class="n">hookspath</span><span class="p">(),</span>
             <span class="n">runtime_hooks</span><span class="o">=</span><span class="n">runtime_hooks</span><span class="p">(),</span>
             <span class="o">**</span><span class="n">get_deps_all</span><span class="p">())</span>
<span class="n">pyz</span> <span class="o">=</span> <span class="n">PYZ</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">pure</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">zipped_data</span><span class="p">,</span>
             <span class="n">cipher</span><span class="o">=</span><span class="n">block_cipher</span><span class="p">)</span>
<span class="n">exe</span> <span class="o">=</span> <span class="n">EXE</span><span class="p">(</span><span class="n">pyz</span><span class="p">,</span>
          <span class="n">a</span><span class="o">.</span><span class="n">scripts</span><span class="p">,</span>
          <span class="n">exclude_binaries</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;touchtracer&#39;</span><span class="p">,</span>
          <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">strip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">upx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">console</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="n">coll</span> <span class="o">=</span> <span class="n">COLLECT</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;../kivy/examples/demo/touchtracer/&#39;</span><span class="p">),</span>
               <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;/Library/Frameworks/SDL2_ttf.framework/Versions/A/Frameworks/FreeType.framework&#39;</span><span class="p">),</span>
               <span class="n">a</span><span class="o">.</span><span class="n">binaries</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">zipfiles</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">,</span>
               <span class="n">strip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="n">upx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">name</span><span class="o">=</span><span class="s1">&#39;touchtracer&#39;</span><span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">BUNDLE</span><span class="p">(</span><span class="n">coll</span><span class="p">,</span>
             <span class="n">name</span><span class="o">=</span><span class="s1">&#39;touchtracer.app&#39;</span><span class="p">,</span>
             <span class="n">icon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
         <span class="n">bundle_identifier</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Change the paths with your relevant paths:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s1">&#39;/path/to/yout/folder/containing/examples/demo/touchtracer/main.py&#39;</span><span class="p">],</span>
            <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/path/to/yout/folder/containing/testpackaging&#39;</span><span class="p">],</span>
<span class="o">...</span>
<span class="o">...</span>
<span class="n">coll</span> <span class="o">=</span> <span class="n">COLLECT</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;../kivy/examples/demo/touchtracer/&#39;</span><span class="p">),</span>
</pre></div>
</div>
<p>Then run the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pyinstaller</span><span class="o">/</span><span class="n">pyinstaller</span><span class="o">.</span><span class="n">py</span> <span class="n">touchtracer</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
<p>Replace <cite>touchtracer</cite> with your app where appropriate.
This will give you a &lt;yourapp&gt;.app in the dist/ folder.</p>
</div>
<div class="section" id="using-pyinstaller-and-homebrew">
<h2>Using PyInstaller and Homebrew<a class="headerlink" href="#using-pyinstaller-and-homebrew" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Package your app on the oldest OS X version you want to support.</p>
</div>
<ol class="arabic">
<li><p class="first">Install <a class="reference external" href="http://brew.sh">Homebrew</a></p>
</li>
<li><p class="first">Install Python:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ brew install python
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">To use Python 3, <code class="docutils literal"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">python3</span></code> and replace <code class="docutils literal"><span class="pre">pip</span></code> with <code class="docutils literal"><span class="pre">pip3</span></code>
in the guide below.</p>
</div>
</li>
<li><p class="first">(Re)install your dependencies with <code class="docutils literal"><span class="pre">--build-bottle</span></code> to make sure they can be
used on other machines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ brew reinstall --build-bottle sdl2 sdl2_image sdl2_ttf sdl2_mixer
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If your project depends on GStreamer or other additional libraries (re)install
them with <code class="docutils literal"><span class="pre">--build-bottle</span></code> as described <a href="#id2"><span class="problematic" id="id3">`below &lt;additional libraries_&gt;`_</span></a>.</p>
</div>
</li>
<li><p class="first">Install Cython and Kivy:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install -I Cython==0.23
$ USE_OSX_FRAMEWORKS=0 pip install -U kivy
</pre></div>
</div>
</li>
<li><p class="first">Install PyInstaller:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install -U pyinstaller
</pre></div>
</div>
</li>
<li><p class="first">Package your app using the path to your main.py:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pyinstaller -y --clean --windowed --name touchtracer \
  --exclude-module _tkinter \
  --exclude-module Tkinter \
  --exclude-module enchant \
  --exclude-module twisted \
  /usr/local/share/kivy-examples/demo/touchtracer/main.py
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">This will not yet copy additional image or sound files. You would need to adapt the
created <code class="docutils literal"><span class="pre">.spec</span></code> file for that.</p>
</div>
</li>
</ol>
<p>The specs file is named <cite>touchtracer.spec</cite> and is located in the directory where you ran
the pyinstaller command.</p>
<p>You need to change the <cite>COLLECT()</cite> call to add the data of touchtracer
(<cite>touchtracer.kv</cite>, <cite>particle.png</cite>, ...). Change the line to add a Tree()
object. This Tree will search and add every file found in the touchtracer
directory to your final package. Your COLLECT section should look something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">coll</span> <span class="o">=</span> <span class="n">COLLECT</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;/usr/local/share/kivy-examples/demo/touchtracer/&#39;</span><span class="p">),</span>
               <span class="n">a</span><span class="o">.</span><span class="n">binaries</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">zipfiles</span><span class="p">,</span>
               <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">,</span>
               <span class="n">strip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">upx</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">name</span><span class="o">=</span><span class="s1">&#39;touchtracer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will add the required hooks so that PyInstaller gets the required Kivy files.
We are done. Your spec is ready to be executed.</p>
<ol class="arabic">
<li><p class="first">Open a console.</p>
</li>
<li><p class="first">Go to the PyInstaller directory, and build the spec:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pyinstaller -y --clean --windowed touchtracer.spec
</pre></div>
</div>
</li>
<li><p class="first">Run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pushd dist
$ hdiutil create ./Touchtracer.dmg -srcfolder touchtracer.app -ov
$ popd
</pre></div>
</div>
</li>
<li><p class="first">You will now have a Touchtracer.dmg available in the <cite>dist</cite> directory.</p>
</li>
</ol>
<p>If your project depends on GStreamer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ brew reinstall --build-bottle gstreamer gst-plugins-{base,good,bad,ugly}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If your Project needs Ogg Vorbis support be sure to add the <code class="docutils literal"><span class="pre">--with-libvorbis</span></code>
option to the command above.</p>
</div>
<p>If you are using Python from Homebrew you currently also need the following step until <a class="reference external" href="https://github.com/Homebrew/homebrew/pull/46097">this pull request</a> gets merged:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ brew reinstall --with-python --build-bottle https://github.com/cbenhagen/homebrew/raw/patch-3/Library/Formula/gst-python.rb
</pre></div>
</div>
</div>
</div>


            <div class="footerlinks">
            <table>
                <tr>
                    <td class="leftlink">
                  <a href="android.html" title="previous chapter">&laquo; Kivy on Android</a></li>
                  </td>
                  <td class="rightlink">
                  <a href="packaging-ios.html" title="next chapter">Create a package for IOS &raquo;</a>
                      </td>
                  </tr>
              </table>
              </div>
          </div>
        </div>
      </div>
      </div>
      <div class="clearer"></div>
    </div>
    </div>
<!-- Piwik --> 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://txzone.net/piwik/" : "http://txzone.net/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 8);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="https://txzone.net/piwik/piwik.php?idsite=8" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->
    <!--
    <div class="footer">
      &copy; Copyright 2010, The Kivy Authors.
      Last updated on 9月 01, 2016.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.2.
</div>
-->
  </body>
</html>