<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="twitter:site" content="@kivyframework">
    
    <title>A Simple Paint App(翻訳済み) &mdash; Kivy 1.9.1 ドキュメント</title>
    <link href='//fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../static/fresh.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.9.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../static/jquery-effects-core-and-slide.js"></script>
    <script type="text/javascript" src="../static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../static/kivy.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Kivy 1.9.1 ドキュメント" href="../index.html" />
    <link rel="up" title="Tutorials(翻訳済み)" href="../tutorials-index.html" />
    <link rel="next" title="Crash Course(翻訳済み)" href="crashcourse.html" />
    <link rel="prev" title="Pong Game Tutorial(翻訳済み)" href="pong.html" /> 
  </head>
  <body>

    <div id="topbar">
        <div id="topwrapper">
        <div id="toplogo">
            <a href="http://kivy.org/">
                <img src="../static/logo-kivy.png" alt="Kivy" height="50"/>
            </a>
        </div>
        <div id="topmenu">
            <ul class="navigation">
                <li><a class="nav-guides" href="../gettingstarted/intro.html">Guides</a></li>
                <li><a class="nav-garden" href="http://kivy-garden.github.io/">Garden</a></li>
                <li><a class="nav-api" href="../api-kivy.html">API Reference</a></li>
                <li><a class="nav-pdf" href="http://kivy.org/docs/pdf/Kivy-latest.pdf">PDF</a></li>
                <li><a class="nav-wiki" href="http://wiki.kivy.org">Wiki</a></li>
            </ul>
        </div>
        </div>
    </div>
<div id="contentall">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
                &nbsp;
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
                <input type="text" class="text" name="q" />
            </form>
          <!--
          <h3><a href="../index.html">A Simple Paint App(翻訳済み)</a></h3>
          <ul>
<li><a class="reference internal" href="#">A Simple Paint App(翻訳済み)</a><ul>
<li><a class="reference internal" href="#basic-considerations">Basic Considerations</a></li>
<li><a class="reference internal" href="#paint-widget">Paint Widget(ペイント widget)</a><ul>
<li><a class="reference internal" href="#initial-structure">Initial Structure(初期構造)</a></li>
<li><a class="reference internal" href="#adding-behaviour">Adding Behaviour(動作の追加)</a></li>
<li><a class="reference internal" href="#bonus-points">Bonus Points(ボーナスポイント)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          <h3><a href="../index.html">Table Of Contents</a></h3>
          -->
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/index.html">Getting Started(翻訳済み)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/intro.html">Introduction (翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/installation.html">Installation(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/first_app.html">A first App(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/properties.html">Properties(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/rules.html">Kv Design Language(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/events.html">Events(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/framework.html">Non-widget stuff</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/layouts.html">Layouts(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/drawing.html">Drawing(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/packaging.html">Packaging(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/examples.html">Examples(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/diving.html">Diving in(翻訳済み)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Gallery of Examples(翻訳済み)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/gallery.html">Gallery(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__3Drendering__main__py.html">3D Rotating Monkey Head(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__animation__animate__py.html">Widget animation(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_suite__py.html">Suite of Application Builders(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_build__py.html">Application example using build() + return(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv__py.html">Application built from a  .kv fil(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__application__app_with_kv_in_template1__py.html">Application from a .kv in a Template Directory(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__camera__main__py.html">Camera Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__bezier__py.html">Bezier Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__canvas_stress__py.html">Canvas stress(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__circle__py.html">Circle Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__fbo_canvas__py.html">FBO Canvas(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines__py.html">Line (SmoothLine) Experiment(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__lines_extended__py.html">Lines Extended Demo(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__mesh__py.html">Mesh test(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__multitexture__py.html">Multitexture Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__repeat_texture__py.html">Repeat Texture on Resize(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__rotation__py.html">Rotation Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__stencil_canvas__py.html">Stencil demo(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__tesselate__py.html">Tesselate Demonstration(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__canvas__texture__py.html">Texture Wrapping and Coordinates Example(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__camera_puzzle__py.html">Shuffled Camera Feed Puzzle(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__kivycatalog__main__py.html">Kivy Catalog(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__multistroke__main__py.html">Multistroke Recognition Database Demonstration(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__pictures__main__py.html">Basic Picture Viewer(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__shadereditor__main__py.html">Live Shader Editor(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__showcase__main__py.html">Showcase of Kivy Features(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/gen__demo__touchtracer__main__py.html">Touch Tracer Line Drawing Demonstration(翻訳済み)</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User’s Guide(翻訳済み)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installation.html">Installation(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../philosophy.html">Philosophy(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html">Contributing(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html">FAQ (翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contact.html">Contact Us(翻訳済み)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide-index.html">Programming Guide(翻訳済み)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/basic.html">Kivy Basics(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/environment.html">Controlling the environment(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/config.html">Configure Kivy(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/architecture.html">Architectural Overview(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/events.html">Events and Properties (翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/inputs.html">Input management (翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/widgets.html">Widgets(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/graphics.html">Graphics (翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/lang.html">Kv language(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/other-frameworks.html">Integrating with other Frameworks(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/bestpractices.html">Best Practices(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/advancedgraphics.html">Advanced Graphics(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/packaging.html">Packaging your application(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/licensing.html">Package licensing (翻訳済み)</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials-index.html">Tutorials(翻訳済み)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pong.html">Pong Game Tutorial(翻訳済み)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">A Simple Paint App(翻訳済み)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crashcourse.html">Crash Course(翻訳済み)</a></li>
</ul>
</li>
</ul>

          <!--
          <h3>Related Topics</h3>
          <ul>
              <li>Previous: <a href="pong.html" title="previous chapter">Pong Game Tutorial(翻訳済み)</a></li>
              <li>Next: <a href="crashcourse.html" title="next chapter">Crash Course(翻訳済み)</a></li>
          </ul>
          -->
        </div>
      </div>
    <div id="content">
    <div class="wrapper">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            <div class="toc"><h2>Table Of Contents</h2><ul>
<li><a class="reference internal" href="#">A Simple Paint App(翻訳済み)</a><ul>
<li><a class="reference internal" href="#basic-considerations">Basic Considerations</a></li>
<li><a class="reference internal" href="#paint-widget">Paint Widget(ペイント widget)</a><ul>
<li><a class="reference internal" href="#initial-structure">Initial Structure(初期構造)</a></li>
<li><a class="reference internal" href="#adding-behaviour">Adding Behaviour(動作の追加)</a></li>
<li><a class="reference internal" href="#bonus-points">Bonus Points(ボーナスポイント)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
  <div class="section" id="a-simple-paint-app">
<h1>A Simple Paint App(翻訳済み)<a class="headerlink" href="#a-simple-paint-app" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>このチュートリアルでは、最初にwidgetを作成する方法を教えます。Kivyアプリケーションをプログラミングする際、あなたが特定の目的ためにカスタム要素で新しいユーザーインターフェースを作成するための最も重要な知識を提供します。</p>
<div class="section" id="basic-considerations">
<h2>Basic Considerations<a class="headerlink" href="#basic-considerations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>アプリケーションを作成する前に、自分自身で重要な3つの項目を確かめる必要があります。</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">アプリケーション・プロセスはどのようなデータですか？</p>
</li>
<li><p class="first">どのようにしてそのデータを視覚的に表現しますか？</p>
</li>
<li><p class="first">ユーザーはどのようにデータと相互作用しますか？</p>
</li>
</ul>
</div></blockquote>
<p>たとえば、非常に単純な線画アプリケーションを記述したいのであれば、ユーザーは指でスクリーンに描画することをたぶん望みます。 それは、ユーザーがアプリケーションと <em>相互作用</em> する方法です。その一方で、アプリケーションは後からユーザーの指があった位置を記憶します。そのため、あなたは後からそれらの位置の間に線を描くことができます。つまり、指のあった点はあなたの <em>データ</em> であり、それらの間に描く線は <em>視覚的な表現</em> です。</p>
<p>Kivyでは、アプリケーションのユーザーインタフェースはwidgetから構成されています。画面に表示されるすべてが何らかの形でwidgetによって描かれています。しばしば、異なる文脈で書いたコードを再利用したいと思うでしょう。widgetはデータをカプセル化し、そのデータとユーザの対話を定義します。そしてその視覚的な表現を描画します。あなたは、入れ子のwidgetによって、単純なインターフェースから複雑なインタフェースまで、何でも構築することができます。これには、ボタン、スライダーや他の一般的なもの、として構築された多くのwidgetがあります。しかし、多くの場合、Kivyに同胞されているウィジェットの範囲を超えたcustom widget(例えば、医療を視覚化するためのウィジェット)が必要となります。</p>
<p>widgetをデザインするときは、この3つの質問に留意してください。最小限かつ再利用可能な方法で書き込むようにしてください(widgetはまさにそれが何をすべきか、それ以上のことはしません。もっと必要な場合は、より多くのwidgetを作成するか、小さなwidgetか他のwidgetを作成してください。単一責任の原則(<a class="reference external" href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a> )に従ってください）。</p>
</div>
<div class="section" id="paint-widget">
<h2>Paint Widget(ペイント widget)<a class="headerlink" href="#paint-widget" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>私たちはあなたの子供のころの夢の一つに、マルチタッチのペイントプログラムを作りたいと思っていたと確信しています。その夢を実現させるために私たちに手助けさせてください。次のセクションでは、Kivyを使ってペイントプログラムを書く方法を順を追って学習します。まずは <a class="reference internal" href="../guide/basic.html#quickstart"><span class="std std-ref">アプリケーションを作成する</span></a>  を読んで基本的な内容を理解していることを確認してください。すでに読んでいる？すばらしいです！始めましょう！</p>
<div class="section" id="initial-structure">
<h3>Initial Structure(初期構造)<a class="headerlink" href="#initial-structure" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>必要ですがとても基本的な構造のコードを書くことから始めましょう。ところで、このセクションで使用されているさまざまなコードは、Kivyに付属している「examples/guide/firstwidget」ディレクトリにもありますので、コピー＆ペーストする必要はありません。ここに必要なコードの基本的な構造は以下のとおりです。</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>paint.pyを実行すると黒い画面しか表示されません。ご覧のように、Button（:ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>quickstart`を参照）などの組み込みwidgetを使用する代わりに、独自のwidgetを作成して描画を行います。widgetから継承するクラス（5-6行目）を作成することで描画を行いますが、独自クラスはまだ何もしませんが、通常のKivyウィジェット（11行目）のように扱います。「if __name__」 ...構造体（14行目）は、ファイルからインポートするときにif文でコードを実行できないようにするPythonの仕組みです。<a href="#id3"><span class="problematic" id="id4">``</span></a>import paint``を書くと、予期せぬことが起きないようにファイルに定義されたクラスを提供します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">「from kivy import <a href="#id1"><span class="problematic" id="id2">*</span></a>」のようなことをするのではなく、AppとWidgetを別々にインポートする必要があるのか​もしれません。短くすると、「<a href="#id2"><span class="problematic" id="id3">`ネームスペースを汚染&lt;http://en.wikipedia.org/wiki/Namespace_%28computer_science%29#Python&gt;`_</span></a>」し、アプリケーションの開始を潜在的には非常に遅くするという欠点があります。また、クラスと変数のネーミングにあいまいさをもたらす可能性があるため、一般的にPythonコミュニティではお勧めされていません。今回のやり方はより速くよりクリーンです。</p>
</div>
</div>
<div class="section" id="adding-behaviour">
<h3>Adding Behaviour(動作の追加)<a class="headerlink" href="#adding-behaviour" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>widgetに実際の動作を追加しましょう。ユーザーの入力に反応させます。 以下のようにコードを変更します。</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">touch</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>ここではユーザーの入力にどのように反応するのかを簡単に説明しています。<code class="xref py py-class docutils literal"><span class="pre">MotionEvent</span></code> （タッチ、クリックなど）が発生すると、タッチオブジェクトに関する情報がコンソールに表示されます。画面上では表示されませんが、プログラムを実行しているコマンドラインを確認すると、すべてのタッチに関するメッセージが表示されます。これはまたwidgetが視覚的表現を持つ必要がないことを示しています。</p>
<p>今はあまりユーザーエクスペリエンスではありません。実際に何かをウィンドウに描画するコードを追加しましょう：</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
            <span class="n">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<img alt="../images/guide-3.jpg" class="align-center" src="../images/guide-3.jpg" />
<p>これらの変更を加えてコードを実行すると、タッチするたびにタッチした場所に小さな黄色の円が描かれます。どのように機能しているのですか？</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">9行目：ウィジェットの <code class="xref py py-class docutils literal"><span class="pre">Canvas</span></code> オブジェクトでPythonの「with」コマンドを使用します。これはwidgetが画面上に自分自身を表すために物を描く領域のようなものです。 「with」ステートメントを使用すると、適切に字下げされたすべての連続した描画コマンドがこのcanvasを変更します。 withステートメントは、描画後、内部状態を適切にクリーンアップできることも保証します。</p>
</li>
<li><p class="first">10行目：すでに推測しているかもしれません：これは、連続した描画操作の:class:<cite>~kivy.graphics.context_instructions.Color</cite> を黄色に設定します（デフォルトの色形式はRGBですので、（1,1,0）は黄色です）。別の色が設定されるまでは黄色のままです。これでブラシを黄色にしてそれを別の色に塗りつぶすまでキャンバスに描画できます。</p>
</li>
<li><p class="first">11行目：描画する円の直径を指定します。円の値を複数回参照する必要があるので変数を使用することが望ましいです。円を大きくするか小さくするかで複数の場所で変数を変更する必要はありません。</p>
</li>
<li><p class="first">12行目：円を描画するには&#8221;<code class="xref py py-class docutils literal"><span class="pre">Ellipse</span></code> で、幅と高さが等しいシンプルな円を描画します。ユーザーがタッチする場所に円を描きたいので、タッチの位置を円に渡します。位置は円の境界ボックスのを指定するため、円をx方向とy方向の「2/d」（つまり左下隅）に移動する必要があることに注意してください。</p>
</li>
</ul>
</div></blockquote>
<p>簡単でしたね。 さらに良くなります！ 以下のようにコードを更新します。</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
            <span class="n">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<img alt="../images/guide-4.jpg" class="align-center" src="../images/guide-4.jpg" />
<dl class="docutils">
<dt>以下は変更された内容です：</dt>
<dd><ul class="first last simple">
<li><p class="first">3行目：<cite>~kivy.graphics.vertex_instructions.Ellipse</cite> の描画コマンドだけでなく、 <code class="xref py py-class docutils literal"><span class="pre">Line</span></code> 描画コマンドもインポートしました。 <code class="xref py py-class docutils literal"><span class="pre">Line</span></code> のドキュメンテーションを見ると、（x1、y1、x2、y2、...、xN、yN）のような2Dポイント座標のリストの引数「points」を受け取ることがわかります。</p>
</li>
<li><p class="first">13行目：これは興味深い箇所です。「touch.ud」は、タッチ用のカスタム属性を格納するPythoの辞書型（type &lt;dict&gt;）です。</p>
</li>
<li><p class="first">13行目：インポートしたLine命令を使用して、描画用にLineのupを設定します。これはon_touch_downで行われるので、新しいタッチのたびに新しい行が表示されます。withブロックの中の線を作成するコードにより、canvasは自動的にその線を知り描画します。後でその行を修正したいので、任意に選択して適切に名前を付けたキーの &#8216;line&#8217;の下でtouch.ud辞書に参照を格納します。最初のタッチ位置を作成する線を渡します。これは線の開始部分であるからです。</p>
</li>
<li><p class="first">15行目：ウィジェットに新しいメソッドを追加します。これは「on_touch_down」メソッドに似ていますが、<em>新しい</em> タッチが発生したときに呼び出される代わりに、（on_touch_downが既に呼び出されている）既存のタッチが移動したとき、つまりタッチの位置が変更されたときに呼び出されます。これは、更新された属性を持つ同じ <code class="xref py py-class docutils literal"><span class="pre">MotionEvent</span></code> オブジェクトであることに注意してください。これは信じられないぐらい便利だと分かったことであり、すぐにその理由がわかるでしょう。</p>
</li>
<li><p class="first">16行目：覚えておいてください：これは「on_touch_down」に入ったのと同じタッチオブジェクトなので、辞書型の変数touch.udに保存したデータに簡単にアクセスできます！先にこのタッチのために設定した行に現在のタッチの位置を新しいポイントとして追加します。 「on_touch_move」ではタッチが移動したときにのみ呼び出されるので、延長する必要があることはわかっています。正確にはラインを更新する理由です。 touch.udに線を保存することで、私たち自身のタッチ・ツー・ラインの位置を保持する必要がなくなるのでずっと簡単になります</p>
</li>
</ul>
</dd>
</dl>
<p>ここまでは順調ですね。しかし今の状態はまったく美しくないです。それはスパゲッティのボローニャのようなものです。それぞれのタッチに独自の色を付けるのはどうですか？グレート、実装しましょう：</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">(),</span> <span class="n">random</span><span class="p">())</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
            <span class="n">Color</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyPaintWidget</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<img alt="../images/guide-5.jpg" class="align-center" src="../images/guide-5.jpg" />
<p>変更点は以下の通りです:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">1行目：Pythonのrandom()関数をインポートして、[0.、1]の範囲でランダムな値を与えます。</p>
</li>
<li><p class="first">10行目：この場合ランダムなRGBカラーを表す3つのランダムな浮動小数点値をもつ新しいタプルを作成するだけです。 「on_touch_down」でこれを行うので、すべての新しいタッチが独自の色を取得します。<a href="#id4"><span class="problematic" id="id5">`タプル&lt;http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences&gt;`_</span></a> の使用によって混乱することはありません。 私たちは怠け者ですのでこのメソッド内のショートカットとして使用するためにタプルを色付けします。</p>
</li>
<li><p class="first">今度は、私たちが生成したランダムな値を使用し、Pythonのタプル展開構文を使用してcolorクラスに値を渡します（Colorクラスはただ1つではなく3つの個別のカラーコンポーネントを必要とするためです）。タプルを直接渡すと、 タプル自体に3つの値が含まれているかどうかに関係なく、1の値が渡されます）</p>
</li>
</ul>
</div></blockquote>
<p>この時点でかなり良くなりまいた！多くのスキルと忍耐があれば、ちょっと素敵な絵を描くこともできるかもしれません</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">デフォルトでは、:class:<a href="#id1"><span class="problematic" id="id2">`</span></a>~kivy.graphics.context_instructions.Color 命令はRGBモードを想定しており、3つのランダムな浮動小数点値を持つタプルを供給しているので、運が悪いときにには暗い色や黒の色が多くなることがあります。デフォルトでは背景色も暗いため、描画する線を（簡単に）見れないためにこのことは悪いことです。これを防ぐには素晴らしいトリックがあります：3つのランダムな値を持つタプルを作成する代わりに、「(random(), 1., 1.)」のようなタプルを作成します。次に、カラー命令に渡すときは、モードをHSVカラースペース：Color(<a href="#id3"><span class="problematic" id="id4">*</span></a>color, mode=&#8217;hsv&#8217;)に設定します。この方法を使用することで可能な色の数は少なくなりますが、得られる色は常に明るくなり色相のみが変化します。</p>
</div>
</div>
<div class="section" id="bonus-points">
<h3>Bonus Points(ボーナスポイント)<a class="headerlink" href="#bonus-points" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>この時点で完成と言えるでしょう。widgetはそれぞれの役割をおこないます：タッチをトレースし、ラインを描画します。また線が始まる位置に円を描画することもできます。</p>
<p>しかし、ユーザーが新らしく作画を開始したい場合はどうなりますか？現在のコードでは、ウィンドウを消去する唯一の方法は、アプリケーション全体を再起動することです。幸いにももっと良い案があります。今まで描かれているすべての線と円を消去するクリアボタンを追加しましょう。現在次の2つのオプションがあります。</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">widgetの子としてボタンを作成できます。それは複数のwidgetを作成すると、すべてのwidgetが独自のボタンを取得することを意味します。注意しないとユーザーはボタンの上に描画できます。</p>
</li>
<li><p class="first">最初にボタンを1回だけアプリケーションクラスに設定して押したときにウィジェットをクリアします。</p>
</li>
</ul>
</div></blockquote>
<p>簡単な例ではさほど重要ではありませんが大規模なアプリケーションの場合、アプリで誰が何をしているかを考えなければなりません。ここでは2番目のオプションを使用して、アプリケーションクラスのbuild（）メソッドでアプリケーションのウィジェットツリーを構築する方法を見ていきます。また、HSV色空間に変更します（上の注を参照）。</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">kivy.uix.button</span> <span class="kn">import</span> <span class="n">Button</span>
<span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Ellipse</span><span class="p">,</span> <span class="n">Line</span>


<span class="k">class</span> <span class="nc">MyPaintWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="n">random</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
            <span class="n">Color</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;hsv&#39;</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">30.</span>
            <span class="n">Ellipse</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">d</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
            <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_touch_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="n">touch</span><span class="o">.</span><span class="n">ud</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">touch</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">touch</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyPaintApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">painter</span> <span class="o">=</span> <span class="n">MyPaintWidget</span><span class="p">()</span>
        <span class="n">clearbtn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Clear&#39;</span><span class="p">)</span>
        <span class="n">clearbtn</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">on_release</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_canvas</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">painter</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">clearbtn</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">parent</span>

    <span class="k">def</span> <span class="nf">clear_canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">painter</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">MyPaintApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<img alt="../images/guide-6.jpg" class="align-center" src="../images/guide-6.jpg" />
<p>ここで何が起きたのですか？</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">4行目：<code class="xref py py-class docutils literal"><span class="pre">Button</span></code> クラスを使用できるようにimportステートメントを追加しました。</p>
</li>
<li><p class="first">25行目：ペイントwidgetと追加しようとしているボタンの親としてダミーのWidget（）オブジェクトを作成します。これは、widgetのツリー階層を設定するための安価な方法です。私たちは、レイアウトを使用するだけでなく、他のすばらしい機能を使うこともできます。再び：このwidgetは、2つのwidgetを子として保持する以外は何もしません。</p>
</li>
<li><p class="first">26行目：私たちは「MyPaintWidget()」いつものように作成しますが、今度は直接返さずに変数名にバインドします。</p>
</li>
<li><p class="first">27行目：ボタンwidgetを作成します。 テキスト「Clear」が表示されたラベルが表示されます。</p>
</li>
<li><p class="first">28行目：ボタンのon_releaseイベント（ボタンが押されて離された時にに起動される）を、33行目と34行目で定義されている <a class="reference external" href="http://en.wikipedia.org/wiki/Callback_function#Python">コールバック関数</a>  の「clear_canvas」にバインドします</p>
</li>
<li><p class="first">29行目と30行目：ダミーの親widgetのペインターとクリアボタンの両方の子を作成してwidgetの階層を設定します。これは、通常のコンピュータの用語では、「ペインター」と「クリアボタン」が同じツリー構造にあることを意味します。</p>
</li>
<li><p class="first">33行目と34行目：今まではボタンは何もしませんでした。存在していて目に見えて押すことができましたが、何も起こりません。ここでは、ボタンを押したときに <a class="reference external" href="http://en.wikipedia.org/wiki/Callback_function#Python">コールバック関数</a> になる小さなゴミ捨て用の関数を作成します。この関数は、ペインターのキャンバスの内容をクリアして、再び真っ黒にします。</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Kivy Widgetクラスは、設計上シンプルに保たれています。背景色や境界色などの一般的なプロパティはありません。代わりに例とドキュメントでは、今回の例で行ったような簡単な内容、キャンバスの色を設定し、図形を描画する簡単な方法を示します。簡単なスタートからより精巧なカスタマイズに移行できます。 Buttonのようなwiggetから派生したより高いレベルの組み込みwidgetは、background_colorのような便利なプロパティを持っていますが、そのプロパティがあるかないはwidgetによって異なります。 APIドキュメントを使用してwidgetが提供するものを確認し、さらに機能を追加する必要がある場合はサブクラスを使用します</p>
</div>
<p>おめでとう！あなたは最初のKivy widgetを書いています。発見すべきものはたくさんあります。私たちはあなたが学んだことがことを理解するために短い休憩を取ることを提案します。あなたがすべてを理解していてより多くの準備ができていると感じたらお読みください。</p>
</div>
</div>
</div>


            <div class="footerlinks">
            <table>
                <tr>
                    <td class="leftlink">
                  <a href="pong.html" title="previous chapter">&laquo; Pong Game Tutorial(翻訳済み)</a></li>
                  </td>
                  <td class="rightlink">
                  <a href="crashcourse.html" title="next chapter">Crash Course(翻訳済み) &raquo;</a>
                      </td>
                  </tr>
              </table>
              </div>
          </div>
        </div>
      </div>
      </div>
      <div class="clearer"></div>
    </div>
    </div>
<!-- Piwik --> 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://txzone.net/piwik/" : "http://txzone.net/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 8);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="https://txzone.net/piwik/piwik.php?idsite=8" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->
    <!--
    <div class="footer">
      &copy; Copyright 2010, The Kivy Authors.
      Last updated on 5月 02, 2017.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.8.
</div>
-->
  </body>
</html>